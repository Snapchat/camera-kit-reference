<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
           1.22.0 Docs
        </a>
         (86% documented)
      </p>
    
      <div class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </div>
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html"> Reference</a>
      <img class="carat" src="img/carat.png" alt=""/>
        Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitARSessionInput.html">SCCameraKitARSessionInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitAVSessionInput.html">SCCameraKitAVSessionInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitAVWriterOutput.html">SCCameraKitAVWriterOutput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitCacheConfig.html">SCCameraKitCacheConfig</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitDataProviderComponent.html">SCCameraKitDataProviderComponent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/c:objc(cs)SCCameraKitEmptyLensLaunchData">SCCameraKitEmptyLensLaunchData</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitExplicitViewportProvider.html">SCCameraKitExplicitViewportProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitLensLaunchDataBuilder.html">SCCameraKitLensLaunchDataBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitLensMediaPickerProviderPhotoLibrary.html">SCCameraKitLensMediaPickerProviderPhotoLibrary</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitLensRemoteApiResponse.html">SCCameraKitLensRemoteApiResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitLensesConfig.html">SCCameraKitLensesConfig</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitPhotoCaptureOutput.html">SCCameraKitPhotoCaptureOutput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/c:objc(cs)SCCameraKitPortraitAdjustment">SCCameraKitPortraitAdjustment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitPreviewView.html">SCCameraKitPreviewView</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitSession.html">SCCameraKitSession</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitSessionConfig.html">SCCameraKitSessionConfig</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/c:objc(cs)SCCameraKitToneMapAdjustment">SCCameraKitToneMapAdjustment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SCCameraKitUserData.html">SCCameraKitUserData</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitAdjustmentsComponentErrorDomain">SCCameraKitAdjustmentsComponentErrorDomain</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitErrorCannotWriteToFile">SCCameraKitErrorCannotWriteToFile</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitErrorLensChecksumMissing">SCCameraKitErrorLensChecksumMissing</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitErrorLensContentNotFound">SCCameraKitErrorLensContentNotFound</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitErrorLensContentUrlMissing">SCCameraKitErrorLensContentUrlMissing</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitErrorLensMetadataNotFound">SCCameraKitErrorLensMetadataNotFound</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitErrorUnspecified">SCCameraKitErrorUnspecified</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitExceptionInvalidApplicationState">SCCameraKitExceptionInvalidApplicationState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitExceptionInvalidLens">SCCameraKitExceptionInvalidLens</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitExceptionInvalidTexture">SCCameraKitExceptionInvalidTexture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitExceptionProcessingInternalFailure">SCCameraKitExceptionProcessingInternalFailure</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitExceptionProcessingLensFailure">SCCameraKitExceptionProcessingLensFailure</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitExceptionUnauthorized">SCCameraKitExceptionUnauthorized</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitLensRepositoryBundledGroup">SCCameraKitLensRepositoryBundledGroup</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitLensesComponentErrorDomain">SCCameraKitLensesComponentErrorDomain</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:@SCCameraKitVersion">SCCameraKitVersion</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitAdjustmentsComponentError.html">SCCameraKitAdjustmentsComponentError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitLensFacingPreference.html">SCCameraKitLensFacingPreference</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitLensFetchStatus.html">SCCameraKitLensFetchStatus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitLensMediaPickerAssetType.html">SCCameraKitLensMediaPickerAssetType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitLensMediaPickerProviderAllowedMediaType.html">SCCameraKitLensMediaPickerProviderAllowedMediaType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitLensRemoteApiResponseStatus.html">SCCameraKitLensRemoteApiResponseStatus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitLensRemoteApiServiceCallStatus.html">SCCameraKitLensRemoteApiServiceCallStatus</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SCCameraKitPreviewViewContentMode.html">SCCameraKitPreviewViewContentMode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Adjustment.html">Adjustment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitARInput.html">SCCameraKitARInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitARInputDelegate.html">SCCameraKitARInputDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAccessTokenProvider.html">SCCameraKitAccessTokenProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAccessTokenProviderTask.html">SCCameraKitAccessTokenProviderTask</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/c:objc(pl)SCCameraKitAdjustment">SCCameraKitAdjustment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/c:objc(pl)SCCameraKitAdjustmentController">SCCameraKitAdjustmentController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAdjustmentsComponent.html">SCCameraKitAdjustmentsComponent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAdjustmentsProcessor.html">SCCameraKitAdjustmentsProcessor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAdjustmentsProcessorObserver.html">SCCameraKitAdjustmentsProcessorObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAgreementSet.html">SCCameraKitAgreementSet</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAgreementsPresentationContextProvider.html">SCCameraKitAgreementsPresentationContextProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitAgreementsStore.html">SCCameraKitAgreementsStore</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitDeviceMotionDataProvider.html">SCCameraKitDeviceMotionDataProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitDeviceMotionParameters.html">SCCameraKitDeviceMotionParameters</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitErrorHandler.html">SCCameraKitErrorHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitInput.html">SCCameraKitInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitInputDestination.html">SCCameraKitInputDestination</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLens.html">SCCameraKitLens</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensHintDelegate.html">SCCameraKitLensHintDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensHintProvider.html">SCCameraKitLensHintProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/c:objc(pl)SCCameraKitLensLaunchData">SCCameraKitLensLaunchData</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensMediaPickerAsset.html">SCCameraKitLensMediaPickerAsset</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensMediaPickerProvider.html">SCCameraKitLensMediaPickerProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensMediaPickerProviderMediaApplicationDelegate.html">SCCameraKitLensMediaPickerProviderMediaApplicationDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensMediaPickerProviderUIDelegate.html">SCCameraKitLensMediaPickerProviderUIDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensPrefetcher.html">SCCameraKitLensPrefetcher</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensPrefetcherObserver.html">SCCameraKitLensPrefetcherObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensPrefetcherTask.html">SCCameraKitLensPrefetcherTask</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensPreview.html">SCCameraKitLensPreview</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensProcessor.html">SCCameraKitLensProcessor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensProcessorObserver.html">SCCameraKitLensProcessorObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRemoteApiRequest.html">SCCameraKitLensRemoteApiRequest</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRemoteApiResponse.html">SCCameraKitLensRemoteApiResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRemoteApiService.html">SCCameraKitLensRemoteApiService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRemoteApiServiceCall.html">SCCameraKitLensRemoteApiServiceCall</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRemoteApiServiceProvider.html">SCCameraKitLensRemoteApiServiceProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRepository.html">SCCameraKitLensRepository</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRepositoryGroupObserver.html">SCCameraKitLensRepositoryGroupObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensRepositorySpecificObserver.html">SCCameraKitLensRepositorySpecificObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLensesComponent.html">SCCameraKitLensesComponent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLocationDataProvider.html">SCCameraKitLocationDataProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitLocationParameters.html">SCCameraKitLocationParameters</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitOutput.html">SCCameraKitOutput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitPortraitAdjustmentController.html">SCCameraKitPortraitAdjustmentController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitPreferences.html">SCCameraKitPreferences</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitProtocol.html">SCCameraKitProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitTextInputContextProvider.html">SCCameraKitTextInputContextProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitTextInputKeyboardAccessoryProvider.html">SCCameraKitTextInputKeyboardAccessoryProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/c:objc(pl)SCCameraKitTexture">SCCameraKitTexture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitToneMapAdjustmentController.html">SCCameraKitToneMapAdjustmentController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitUserDataProvider.html">SCCameraKitUserDataProvider</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/SCCameraKitUserDataProviderDelegate.html">SCCameraKitUserDataProviderDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Type%20Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type%20Definitions/SCCameraKitLensMediaPickerAssetMetadata.html">SCCameraKitLensMediaPickerAssetMetadata</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/AdjustmentsProcessor.html">AdjustmentsProcessor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/PortraitAdjustment.html">PortraitAdjustment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/ToneMapAdjustment.html">ToneMapAdjustment</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='camerakit-ios' class='heading'>CameraKit iOS</h1>
<h3 id='usage-philosophy' class='heading'>Usage Philosophy</h3>

<p>In general, CameraKit attaches to your existing camera workflow. You are still responsible for configuring and managing an AVCaptureSession, which CameraKit will attach onto. You may start, stop, and reconfigure your session as needed.</p>
<h2 id='getting-started' class='heading'>Getting Started</h2>
<h3 id='requirements' class='heading'>Requirements</h3>

<p>CameraKit requires a minimum of iOS 11, and a 64 bit processor. CameraKit will compile, but not run on a Simulator (due to lack of AVCaptureSession support).</p>

<p>Make sure you also update <code>SCCameraKitClientID</code> and <code>SCCameraKitAPIToken</code> in your application&rsquo;s <code>Info.plist</code> with the application ID and API token from the Snap Kit developer portal. Note that you can also pass in these values when creating a session like:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">sessionConfig</span> <span class="o">=</span> <span class="kt">SessionConfig</span><span class="p">(</span><span class="nv">applicationID</span><span class="p">:</span> <span class="s">"application_id_here"</span><span class="p">,</span> <span class="nv">apiToken</span><span class="p">:</span> <span class="s">"api_token_here"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">session</span> <span class="o">=</span> <span class="kt">Session</span><span class="p">(</span><span class="nv">sessionConfig</span><span class="p">:</span> <span class="n">sessionConfig</span><span class="p">,</span> <span class="nv">lensesConfig</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">errorHandler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre>

<p>This is useful in case you need to dynamically update your API token which may happen in the case where your API token gets revoked for some reason.</p>

<p>In order to test sharing to Snapchat, make sure you also add your Snap Kit client id <code>SCSDKClientId</code> in <code>Info.plist</code></p>
<h3 id='dependency-management' class='heading'>Dependency Management</h3>

<p>CameraKit currently supports CocoaPods and Swift Package Manager.</p>
<h4 id='cocoapods' class='heading'>CocoaPods</h4>

<p>The <code>Podfile</code> should already be setup correctly to reference the camera kit sdk podpsec directory, but if you choose to move the SDK podspec directory somewhere else just be sure to add/modify this line:
<code>pod &#39;SCSDKCameraKit&#39;, :path =&gt; &#39;CameraKit/CameraKit&#39;</code>
where <code>:path</code> points to the directory that contains the camera kit podspec.</p>

<p>Before opening the workspace make sure you run
<code>pod install</code>
and open <code>CameraKitSample.xcworkspace</code></p>
<h4 id='swift-package-manager' class='heading'>Swift Package Manager</h4>

<ul>
<li>Drag and drop the <code>CameraKit/CameraKit</code> directory into your project or workspace.</li>
<li>Click the + button in the &ldquo;Frameworks, Libraries, and Embedded Content&rdquo; section, select <code>SCSDKCameraKit</code>, and add it as a dependency.</li>
</ul>

<p>More detail can be found in <a href="https://developer.apple.com/documentation/swift_packages/organizing_your_code_with_local_packages">Apple&rsquo;s documentation</a>.</p>
<h4 id='configure-your-avcapturesession-pipeline' class='heading'>Configure your AVCaptureSession Pipeline</h4>

<p>First, create and configure an AVCaptureSession. Apple provides a full-featured <a href="https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/setting_up_a_capture_session">reference</a>.</p>

<p>For example, if you want to setup a regular capture session for the front facing camera you&rsquo;d do:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">captureSession</span> <span class="o">=</span> <span class="kt">AVCaptureSession</span><span class="p">()</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">beginConfiguration</span><span class="p">()</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">videoDevice</span> <span class="o">=</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="o">.</span><span class="n">front</span><span class="p">),</span>
    <span class="k">let</span> <span class="nv">videoDeviceInput</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">AVCaptureDeviceInput</span><span class="p">(</span><span class="nv">device</span><span class="p">:</span> <span class="n">videoDevice</span><span class="p">),</span>
    <span class="n">captureSession</span><span class="o">.</span><span class="nf">canAddInput</span><span class="p">(</span><span class="n">videoDeviceInput</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">videoDeviceInput</span><span class="p">)</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">commitConfiguration</span><span class="p">()</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">startRunning</span><span class="p">()</span>
</code></pre>

<p>(PS: don&rsquo;t forget to add <code>NSCameraUsageDescription</code> in your Info.plist and make sure you have set up the proper permissions/authorization flows)</p>
<h4 id='configuring-the-camerakit-pipeline' class='heading'>Configuring the CameraKit Pipeline</h4>

<p>CameraKit works similarly to AVCaptureSession – it also has inputs and outputs. We&rsquo;ll create a CameraKit session, and connect it to your existing AVCaptureSession.</p>

<p>To begin, first instantiate a <code>Session</code>. A <code>Session</code> object will be your main entry point into CameraKit. Through it, you can access components like lenses.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">cameraKit</span> <span class="o">=</span> <span class="kt">Session</span><span class="p">()</span>
</code></pre>

<p>Next, create a CameraKit input and start your CameraKit Session with it. AVSessionInput is an input that CameraKit provides that wraps up lens-specific details of AVCaptureSession configuration (such as setting the pixel format).</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">input</span> <span class="o">=</span> <span class="kt">AVSessionInput</span><span class="p">(</span><span class="nv">session</span><span class="p">:</span> <span class="n">yourAVCaptureSession</span><span class="p">)</span>
<span class="n">cameraKit</span><span class="o">.</span><span class="nf">start</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">input</span><span class="p">)</span>
</code></pre>

<p>To display the processed output of CameraKit, we provide a <code>PreviewView</code> that behaves similarly to <code>AVCaptureVideoPreviewLayer</code>. The <code>PreviewView</code> is a CameraKit <code>Output</code> – it receives processed frames and displays them. We&rsquo;ll also set <code>automaticallyConfiguresTouchHandler</code> so that CameraKit can process touch events and users can interact with lenses. Add it to the view heirarchy like any other <code>UIView</code>, and connect it to the Session by calling <code>add(output:)</code>.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">previewView</span> <span class="o">=</span> <span class="kt">PreviewView</span><span class="p">()</span>
<span class="n">previewView</span><span class="o">.</span><span class="n">automaticallyConfiguresTouchHandler</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">cameraKit</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">output</span><span class="p">:</span> <span class="n">previewView</span><span class="p">)</span>
</code></pre>

<p>At this point, if you build and run your app, you should see your camera input displaying onscreen without any lenses applied to it. We&rsquo;ll discuss how to activate lenses in the next section.</p>
<h4 id='activating-lenses' class='heading'>Activating Lenses</h4>

<p>CameraKit lenses are provided by the <code>LensRepository</code> class. You can access this through <code>cameraKit.lenses.respository</code>. Lenses are fetched asynchronously, and you may wish to hold a reference to the lenses returned from <code>LensRepository</code>.</p>
<pre class="highlight swift"><code><span class="n">cameraKit</span><span class="o">.</span><span class="n">lenses</span><span class="o">.</span><span class="n">repository</span><span class="o">.</span><span class="n">availableLenses</span> <span class="p">{</span> <span class="n">lenses</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
    <span class="k">self</span><span class="o">.</span><span class="n">lenses</span> <span class="o">=</span> <span class="n">lenses</span>
<span class="p">}</span>
</code></pre>

<p>The <code>LensProcessor</code> is responsible for applying and clearing lenses. You can access it through <code>cameraKit.lenses.processor</code>.</p>

<p>We can now take the lens that we&rsquo;ve retrieved from the repository, and apply it to the lens processor.</p>
<pre class="highlight swift"><code><span class="n">cameraKit</span><span class="o">.</span><span class="n">lenses</span><span class="o">.</span><span class="n">processor</span><span class="p">?</span><span class="o">.</span><span class="n">apply</span> <span class="p">{</span> <span class="n">success</span> <span class="k">in</span>
    <span class="c1">// If success == true, the lens is now applied</span>
<span class="p">}</span>
</code></pre>

<p>The preview view should now be showing camera input with a lens applied.</p>

<p>When you are done with a lens and want to remove it from the camera input, you can call <code>clear</code> on the lens processor. It is <em>not</em> neccessary to clear a lens before applying a new one.</p>
<pre class="highlight swift"><code><span class="n">cameraKit</span><span class="o">.</span><span class="n">lenses</span><span class="o">.</span><span class="n">processor</span><span class="p">?</span><span class="o">.</span><span class="nf">clear</span><span class="p">()</span> <span class="p">{</span> <span class="n">success</span> <span class="k">in</span>
    <span class="c1">// If success == true, the lens has been cleared</span>
<span class="p">}</span>
</code></pre>

<p>The preview view should once again be showing camera input with no lenses applied.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2023 <a class="link" href="https://kit.snapchat.com/camera-kit" target="_blank" rel="external noopener">Snap Inc.</a>. All rights reserved. (Last updated: 2023-04-27)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
    </section>
  </body>
</html>
